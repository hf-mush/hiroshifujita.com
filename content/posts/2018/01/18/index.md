---
title: "Windows IIS でリバースプロキシをする"
date: "2018-01-18 06:30:17+09:00"
draft: false
categories: "blog"
---
最近、Windows サーバー上に IIS をインストールして運用する案件がいくつかありました。  

その中で、リバースプロキシを使ってサーバーを共存させてみようっていう形をとることがあったので、自分のメモとしても、ここに残しておこうと思います。  

## IIS って？

僕もよく知らなかったんですが、Windows 上で動かすサーバーみたいなものです。  

ApacheやNGINXと同じく、ウェブサーバーミドルウェアです。  

正式には [Microsoft Internet Information Services](https://www.iis.net/) という名称とのこと。  

特徴は、Microsoftらしく、設定画面があって、そこで設定値をいじれるものです。  

ApacheやNGINXは設定ファイルというのがあって、自分で記述したり変更したりして設定を行なっていくので、とっつきにくいというのがあります。  

Windowsの十八番、GUIでの操作なんで、とっつきやすいというのはいいところ。  

ただ、インターフェースは使いづらかったりします。  

普段、設定ファイルをいじいじしているので、そのせいかも。  

## リバースプロキシを設定するには

話は戻して、IISでリバースプロキシを設定するには、ある追加機能をいれないといけません。  

[Application Request Routing](https://www.iis.net/downloads/microsoft/application-request-routing) というものです。  

これは何をするかというと、ある端末からのアクセスを好みの設定により、どのサーバーにつなぐかを自動処理させることができます。  

たとえば、http://xxxx.com というリクエストはAサーバー、http://xxx.com/api というリクエストはBサーバー、といった具合でURLでの振り分けができたりします。  

なにが嬉しいかというと、ウェブサイトのリソースと、APIのリソースを同じ筐体におきたい時なんかに役立ちます。  

それがほとんどなのかな。笑  

http://blog.shibata.tech/entry/2017/11/05/214253  

結論、上記を参考に設定しました。  

GUI って楽チン。  
